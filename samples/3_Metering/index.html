<!DOCTYPE html>
<html>
  <head>
    <title>Gr&uuml;nStromJeton</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<script type="text/javascript" src="https://zoernert.github.io/ewallet/dist/ethers-wallet.min.js"></script>
	
  </head>
  <body>
    <div class="container" id="app_content">

		<div class="row" style="margin-bottom:10px;border-bottom:1px solid #303030">
			<h1 id="tktitle"><span style="color:#32CD32">Gr&uuml;n</span><span style="color:#228B22">Strom</span><span style="color:#006400">Jeton</span></h1>
			<span style="float:right;color:#909090"><em>mit nachgewiesener Nutzung von lokalem Wind-,Wasser-,Sonnenstrom die Energiewende meistern.</em></span>
		</div>

		<div class="row">
			<h2>Anwendungsfall: Metering - Zählerstandsgang / Manuelle Erfassung</h2>
			<p>
			Damit ein Stromkunde die Jetons gutgeschrieben bekommt, sind mindestens zwei Ablesungen innerhalb von 24 Stunden notwendig. Diese werden als Transaktion in die Blockchain geschrieben und von dort durch die Oracle des GrünStromIndex verarbeitet. Zur Lokalisierung ist es notwendig eine Postleitzahl zu setzen.
			</p>			
			<ul>
				<li>Zählerstand übermitteln (in Wh) <code>gsi.app.commitReading(zaehlerstand,callback)</code></li>
				<li>Setzen der Postleitzahl (Deutschland) <code>gsi.app.setPLZ(plz,callback)</code></li>
			</ul>					
		</div>
		<div class="row">
			<h2>Demo</h2>
			<form class="form" onsubmit="return false;">
			<div class="form-group">
				<label for="reading">Zählerstand in Wh:</label>
				<input type="text" class="form-control" name="reading" id="reading" placeholder="1234..">
			</div>			
			<div class="form-group">
				<input type="button" class="btn btn-primary" id="btnCommit" value="Übertragen"/>				
			</div>
			</form>
			
		</div>
		<div class="row">
			<h3>Letzte Transaktion</h3>
			<span class="alert" id="txId"></span>
		</div>
		<div class="row">
			<h2>Code</h2>	
			<p>
				<a class="btn btn-default" href="https://github.com/zoernert/zoernert.github.io/tree/master/samples/3_metering">GitHub</a>
			</p>
			<p>
				<table class="table">
				<tr><th>Datei</th><th>Beschreibung</th></tr>
				<tr><td>./index.html</td><td>Diese HTML Seite</td></tr>
				<tr><td>./index.js</td><td>View-Logik</td></tr>
				</table>
			</p>			
		</div>
		
		<div class="row">
			<h2>Best Practice</h2>
			<p>
				<ul>
					<li>Es existiert die Funktion <code>gsi.app.forceLogin(callback)</code>, welche beim Document-Ready Event geladen werden kann, um eine schnellere Initialisierung zu ermöglichen</li>
					<li>Es findet keine Prüfung in der API statt, ob der Zählerstand plausibel ist. D.h. es wird im schlimmsten Falle eine Transaktion geschrieben, welche vom SmartContract abgelehnt wird. Empfohlen ist dies in der Implementierung (Seite) zu testen.</li>
				</ul>
			</p>
		</div>
	</div>
	 <footer class="footer" style="border-top:1px solid #303030;margin-top:20px;">
      <div class="container">
        <p class="text-muted"><a href="https://gitter.im/zoernert/gsi/" target="_blank">Gitter (Hilfe)</a> | <a href=https://zoernert.github.io/gsi/" target="_blank">FrontEnd (github.io)</a> | <a href="https://github.com/zoernert/gsi">Source (GIT)</a> | <a href="https://blog.stromhaltig.de/search/GSI">Blog</a> | <a href="http://stromhaltig.de/impressum/">Impressum/Kontakt</a></p>
      </div>
    </footer>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>	
	
	<!-- Eigentliche API Integration für GSJ https://zoernert.github.io -->
	<script type="text/javascript" src="/js/api.js"></script>
	
	<!-- Laden des Beispielcodes -->
	<script src="./index.js"></script>
  </body>
</html>
